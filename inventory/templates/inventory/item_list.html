{% extends "inventory/base.html" %}
{% load static %}


      {% block title %}
        Inventory Items
      {% endblock %}
{% block content %}
  <link rel="stylesheet" type="text/css" href="{% static 'inventory/home.styles.css' %}">
  <div class="itemlist-title-header">
    Inventory Items
  </div>

  <br/>

  <form method="get">
    <input type="text" name="q" placeholder="Search items..." value="{{ request.GET.q }}">
    <button type="submit">Search</button>
  </form>
  <br/>
  {% if page_obj %}
  <table border="1">
    <thead>
      <tr>
        <th>Name</th>
        <th>Quantity</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for item in page_obj %}
        <tr>
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.category.name }}</td>
          <td>
            <a href="{% url 'edit_item' item.id %}">Edit</a> |
            <a href="{% url 'delete_item' item.id %}" onclick="return confirm('Delete this item?');">Delete</a>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No items found.</p>
{% endif %}


  <div>
      {% if page_obj.has_previous %}
          <a href="?page=1{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">First</a>
          <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Previous</a>
      {% endif %}

      <span> Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

      {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Next</a>
          <a href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">Last</a>
      {% endif %}


  </div>

  <p><a href="{% url 'add_item' %}">Add New Item</a></p>
 {% endblock %}
